<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>메인</title>
    <link rel="stylesheet" href="/css/app.css">
</head>
<body>
<div class="layout">
    <header class="topbar">
        <div class="brand">TEAM11</div>
        <div class="actions">
            <span id="welcomeArea" class="welcome"></span>
            <button id="btnLogin">로그인</button>
            <button id="btnRegister">회원가입</button>
            <button id="btnLogout" style="display:none;">로그아웃</button>
        </div>
    </header>

    <section class="searchbar">
        <select id="selDo"><option value="">도(전체)</option></select>
        <select id="selSi"><option value="">시/군/구(전체)</option></select>
        <input id="kw" type="text" placeholder="키워드를 입력하세요" />
        <button id="btnSearch">검색</button>
    </section>

    <div class="content">
        <aside class="sidebar">
            <div class="menu">
                <div class="menu-main">
                    <button class="menu-btn active" data-tab="main">메인</button>
                    <button class="menu-btn" data-tab="recommend" disabled>추천</button>
                    <button class="menu-btn" data-tab="calendar" disabled>캘린더</button>
                    <button class="menu-btn" data-tab="my" disabled>내 모임</button>
                </div>
                <div class="menu-cat">
                    <h4>카테고리</h4>
                    <div id="catList" class="cat-list"></div>
                </div>
                <div class="menu-bottom">
                    <button id="btnNewClub" class="primary">모임 만들기</button>
                </div>
            </div>
        </aside>

        <main class="mainpanel">
            <div id="cards" class="cards"></div>
            <div id="pager" class="pager"></div>
        </main>
    </div>
</div>

<!-- 로그인 모달 -->
<div id="loginModal" class="modal">
    <div class="modal-body">
        <h3>로그인</h3>
        <label>아이디</label>
        <input id="loginId" type="text" minlength="4" maxlength="20">
        <label>비밀번호</label>
        <input id="loginPw" type="password" minlength="8" maxlength="64">
        <div class="modal-actions">
            <button id="doLogin" class="primary">로그인</button>
            <button class="ghost" data-close="#loginModal">닫기</button>
        </div>
        <div id="loginErr" class="error"></div>
    </div>
</div>

<!-- 회원가입 모달 -->
<div id="registerModal" class="modal">
    <div class="modal-body">
        <h3>회원가입</h3>
        <label>아이디</label>
        <div class="row">
            <input id="regId" type="text" minlength="4" maxlength="20">
            <button id="btnCheckId" class="ghost">중복검사</button>
        </div>
        <label>비밀번호</label>
        <input id="regPw" type="password" minlength="8" maxlength="64">
        <label>이메일</label>
        <div class="row">
            <input id="regEmail" type="email">
            <button id="btnCheckEmail" class="ghost">중복검사</button>
        </div>
        <label>닉네임</label>
        <input id="regNick" type="text" maxlength="50">
        <div>
            <h4>관심 카테고리</h4>
            <div id="regCats" class="cat-list"></div>
        </div>
        <div class="modal-actions">
            <button id="doRegister" class="primary">가입하기</button>
            <button class="ghost" data-close="#registerModal">닫기</button>
        </div>
        <div id="regMsg" class="error"></div>
    </div>
</div>

<script type="module" src="/js/main.js"></script>
<script>
    document.addEventListener('click', (e)=>{
        const btn = e.target.closest('[data-close]');
        if(btn){ document.querySelector(btn.getAttribute('data-close')).classList.remove('show'); }
    });
</script>
</body>
</html>
