<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>모임 관리</title>
    <link rel="stylesheet" th:href="@{/css/app.css}">
</head>
<body class="bg-deep"
      th:data-msg="${msg}"
      th:data-error="${error}">

<header class="topbar" th:replace="~{fragments/common :: topbar}"></header>

<div class="wrap">
    <aside class="sidebar" th:replace="~{fragments/common :: sidebar}"></aside>

    <main class="content">

        <div class="detail-card">
            <div th:replace="~{fragments/common :: club-tabs}"></div>
        </div>

        <div class="detail-card" style="margin-top: 16px; margin-bottom: 16px;">
            <h2 style="margin: 0; font-size: 24px; font-weight: bold;">모임 관리</h2>
        </div>

        <div class="post-grid-container" style="display: flex; flex-direction: column; gap: 20px;">

            <div class="post-card"
                 th:onclick="|location.href='@{/clubs/{id}/manager/edit(id=${club.id})}'|"
                 style="cursor: pointer;">
                <div class="card-content" style="display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <h3 class="post-title" style="margin-bottom: 6px; margin-top: 0;">모임 정보 수정</h3>
                        <p class="post-preview" style="margin: 0;">모임 이름, 소개글, 대표 이미지, 카테고리를 수정합니다.</p>
                    </div>
                </div>
            </div>

            <div class="post-card"
                 th:onclick="|location.href='@{/clubs/{id}/manager/features(id=${club.id})}'|"
                 style="cursor: pointer;">
                <div class="card-content" style="display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <h3 class="post-title" style="margin-bottom: 6px; margin-top: 0;">모임 기능 수정</h3>
                        <p class="post-preview" style="margin: 0;">가입 방식(자동/승인) 설정을 변경합니다.</p>
                    </div>
                </div>
            </div>

            <div class="post-card"
                 th:onclick="|location.href='@{/clubs/{id}/manager/members(id=${club.id})}'|"
                 style="cursor: pointer;">
                <div class="card-content" style="display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <h3 class="post-title" style="margin-bottom: 6px; margin-top: 0;">멤버 관리</h3>
                        <p class="post-preview" style="margin: 0;">멤버 목록을 확인하고 멤버를 추방하거나, 차단한 사용자 목록을 확인합니다.</p>
                    </div>
                </div>
            </div>

            <div class="post-card"
                 onclick="openClubDeleteModal()"
                 style="cursor: pointer; border: 1px solid #5c2b2b; background: #1a0f0f;">
                <div class="card-content" style="display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <h3 class="post-title" style="color: #ff8a8a; margin-bottom: 6px; margin-top: 0;">모임 삭제</h3>
                        <p class="post-preview" style="margin: 0; color: #d18e8e;">모임을 영구적으로 삭제합니다. (복구 불가)</p>
                    </div>
                </div>
            </div>

        </div>

        <div id="clubDeleteModal" class="modal" style="display: none;">
            <div class="modal-card" style="text-align: center; width: 400px; background: #1a0f0f; border: 1px solid #5c2b2b;">
                <h3 style="margin-top: 0; color: #ff8a8a;">정말 모임을 삭제하시겠습니까?</h3>
                <p style="color: #d18e8e; margin: 20px 0; font-size: 0.95rem; line-height: 1.5;">
                    모임을 삭제하면 모든 게시글, 사진, 채팅 내역이<br>
                    <strong>영구적으로 삭제</strong>되며 복구할 수 없습니다.
                </p>

                <div style="display: flex; justify-content: center; gap: 10px;">
                    <button type="button" class="btn" onclick="closeClubDeleteModal()">취소</button>
                    <form th:action="@{/clubs/{id}/delete(id=${club.id})}" method="post">
                        <button type="submit" class="btn btn-danger" style="background: #8b0000; border-color: #5c2b2b;">네, 삭제합니다</button>
                    </form>
                </div>
            </div>
        </div>

        <script>
            function openClubDeleteModal() {
                document.getElementById('clubDeleteModal').style.display = 'flex';
            }
            function closeClubDeleteModal() {
                document.getElementById('clubDeleteModal').style.display = 'none';
            }
        </script>

    </main>
</div>

<div th:replace="~{fragments/common :: modals}"></div>
<div th:replace="~{fragments/common :: scripts}"></div>

</body>
</html>