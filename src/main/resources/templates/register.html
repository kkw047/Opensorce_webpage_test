<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head><meta charset="UTF-8"><title>회원가입</title></head>
<body>
<h2>회원가입</h2>
<form th:action="@{/register}" method="post">
    <input type="text" name="loginId" placeholder="아이디(선택)">
    <input type="email" name="email" placeholder="이메일" required>
    <input type="password" name="password" placeholder="비밀번호" required>
    <input type="text" name="nickname" placeholder="닉네임" required>

    <select id="regDo" name="regionDo" required>
        <option value="" selected disabled>도 선택</option>
        <option th:each="d : ${dos}" th:value="${d}" th:text="${d}">충북</option>
    </select>
    <select id="regSi" name="regionSi" required>
        <option value="" selected disabled>시/군/구</option>
    </select>

    <div>선호 카테고리</div>
    <div th:each="c : ${categories}">
        <label><input type="checkbox" name="categoryIds" th:value="${c.id}"><span th:text="${c.name}">카테고리</span></label>
    </div>

    <button>가입</button>
</form>
<p><a th:href="@{/clubs}">메인으로</a></p>

<script>
    // 간단한 시/군/구 채움
    (async function(){
        const doSel = document.getElementById('regDo');
        const siSel = document.getElementById('regSi');
        async function loadSis() {
            siSel.innerHTML = '<option value="">시/군/구</option>';
            if (!doSel.value) return;
            const res = await fetch('/api/regions/sis?do=' + encodeURIComponent(doSel.value));
            const arr = await res.json();
            arr.forEach(s => {
                const op = document.createElement('option');
                op.value = s; op.textContent = s; siSel.appendChild(op);
            });
        }
        doSel.addEventListener('change', loadSis);
    })();
</script>
</body>
</html>
